Uploading blueprint cloudify/gcp.yaml...
 gcp.yaml |############################################################| 100.0%
Blueprint uploaded. The blueprint's id is cloudify-wordpress-blueprint-gcp
Creating new deployment from blueprint cloudify-wordpress-blueprint-gcp...
Deployment created. The deployment's id is gcp
Executing workflow `install` on deployment `gcp` [timeout=900 seconds]
Deployment environment creation is pending...
2019-08-08 12:51:18.093  CFY <gcp> Starting 'create_deployment_environment' workflow execution
2019-08-08 12:51:18.096  CFY <gcp> Installing deployment and workflow plugins
2019-08-08 12:51:18.197  CFY <gcp> Sending task 'cloudify_agent.operations.install_plugins'
2019-08-08 12:51:18.213  CFY <gcp> Task started 'cloudify_agent.operations.install_plugins'
2019-08-08 12:51:18.556  LOG <gcp> INFO: Installing plugin: gcp_plugin
2019-08-08 12:51:19.415  LOG <gcp> INFO: Using existing installation of managed plugin: e0a99ba4-54d6-4741-a773-4ec378dc8634 [package_name: cloudify-gcp-plugin, package_version: 1.4.4, supported_platform: linux_x86_64, distribution: centos, distribution_release: core]
2019-08-08 12:51:19.416  LOG <gcp> INFO: Installing plugin: ansible
2019-08-08 12:51:20.261  LOG <gcp> INFO: Using existing installation of managed plugin: 7142c593-6e52-429a-8a71-55266c022e02 [package_name: cloudify-ansible-plugin, package_version: 2.4.0, supported_platform: linux_x86_64, distribution: centos, distribution_release: core]
2019-08-08 12:51:20.261  LOG <gcp> INFO: Installing plugin: suspend
2019-08-08 12:51:21.310  LOG <gcp> INFO: Using existing installation of managed plugin: 62c3cd35-5a18-49fd-a670-48f9ad207b05 [package_name: cloudify-utilities-plugin, package_version: 1.14.0, supported_platform: linux_x86_64, distribution: centos, distribution_release: core]
2019-08-08 12:51:21.311  LOG <gcp> INFO: Installing plugin: configuration
2019-08-08 12:51:22.217  LOG <gcp> INFO: Using existing installation of managed plugin: 62c3cd35-5a18-49fd-a670-48f9ad207b05 [package_name: cloudify-utilities-plugin, package_version: 1.14.0, supported_platform: linux_x86_64, distribution: centos, distribution_release: core]
2019-08-08 12:51:22.218  LOG <gcp> INFO: Installing plugin: scalelist
2019-08-08 12:51:23.034  LOG <gcp> INFO: Using existing installation of managed plugin: 62c3cd35-5a18-49fd-a670-48f9ad207b05 [package_name: cloudify-utilities-plugin, package_version: 1.14.0, supported_platform: linux_x86_64, distribution: centos, distribution_release: core]
2019-08-08 12:51:23.035  CFY <gcp> Task succeeded 'cloudify_agent.operations.install_plugins'
2019-08-08 12:51:23.163  CFY <gcp> Creating deployment work directory
2019-08-08 12:51:23.412  CFY <gcp> 'create_deployment_environment' workflow execution succeeded
2019-08-08 12:51:26.103  CFY <gcp> Starting 'install' workflow execution
2019-08-08 12:51:27.944  CFY <gcp> [network_fhm4n1] Validating node instance before creation: nothing to do
2019-08-08 12:51:28.067  CFY <gcp> [network_fhm4n1] Precreating node instance: nothing to do
2019-08-08 12:51:28.153  CFY <gcp> [network_fhm4n1] Creating node instance
2019-08-08 12:51:28.848  CFY <gcp> [network_fhm4n1.create] Sending task 'cloudify_gcp.compute.network.create'
2019-08-08 12:51:30.757  LOG <gcp> [network_fhm4n1.create] INFO: Create network network-fhm4n1
2019-08-08 12:51:33.185  CFY <gcp> [network_fhm4n1.create] Task rescheduled 'cloudify_gcp.compute.network.create' -> Operation started
Traceback (most recent call last):
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 813, in main
    payload = handler.handle()
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 464, in handle
    raise ctx.operation._operation_retry
OperationRetry: Operation started

2019-08-08 12:51:48.342  CFY <gcp> [network_fhm4n1.create] Sending task 'cloudify_gcp.compute.network.create' [retry 1/60]
2019-08-08 12:51:51.649  LOG <gcp> [network_fhm4n1.create] INFO: Get network network-fhm4n1 details
2019-08-08 12:51:53.219  CFY <gcp> [network_fhm4n1.create] Task succeeded 'cloudify_gcp.compute.network.create' [retry 1/60]
2019-08-08 12:51:53.393  CFY <gcp> [network_fhm4n1] Node instance created
2019-08-08 12:51:53.559  CFY <gcp> [network_fhm4n1] Configuring node instance: nothing to do
2019-08-08 12:51:53.753  CFY <gcp> [network_fhm4n1] Starting node instance: nothing to do
2019-08-08 12:51:53.873  CFY <gcp> [network_fhm4n1] Poststarting node instance: nothing to do
2019-08-08 12:51:53.946  CFY <gcp> [network_fhm4n1] Node instance started
2019-08-08 12:51:54.939  CFY <gcp> [subnet_nhked5] Validating node instance before creation
2019-08-08 12:51:55.066  CFY <gcp> [subnet_nhked5.create] Sending task 'cloudify_gcp.compute.subnetwork.creation_validation'
2019-08-08 12:51:55.951  CFY <gcp> [firewall_9p4oqb] Validating node instance before creation: nothing to do
2019-08-08 12:51:56.172  CFY <gcp> [firewall_9p4oqb] Precreating node instance: nothing to do
2019-08-08 12:51:56.417  CFY <gcp> [firewall_9p4oqb] Creating node instance
2019-08-08 12:51:57.006  CFY <gcp> [firewall_9p4oqb.create] Sending task 'cloudify_gcp.compute.firewall.create'
2019-08-08 12:51:58.259  CFY <gcp> [subnet_nhked5.create] Task succeeded 'cloudify_gcp.compute.subnetwork.creation_validation'
2019-08-08 12:51:58.298  CFY <gcp> [subnet_nhked5] Node instance validated before creation
2019-08-08 12:51:58.507  CFY <gcp> [subnet_nhked5] Precreating node instance: nothing to do
2019-08-08 12:51:58.720  CFY <gcp> [subnet_nhked5] Creating node instance
2019-08-08 12:51:59.738  CFY <gcp> [subnet_nhked5.create] Sending task 'cloudify_gcp.compute.subnetwork.create'
2019-08-08 12:52:00.583  LOG <gcp> [firewall_9p4oqb.create] INFO: Create firewall rule firewall-9p4oqb in network https://www.googleapis.com/compute/v1/projects/node2faas-248113/global/networks/network-fhm4n1
2019-08-08 12:52:02.180  LOG <gcp> [subnet_nhked5.create] INFO: Create subnetwork subnet-nhked5
2019-08-08 12:52:03.237  CFY <gcp> [firewall_9p4oqb.create] Task succeeded 'cloudify_gcp.compute.firewall.create'
2019-08-08 12:52:03.528  CFY <gcp> [firewall_9p4oqb] Node instance created
2019-08-08 12:52:03.646  CFY <gcp> [firewall_9p4oqb] Configuring node instance: nothing to do
2019-08-08 12:52:03.734  CFY <gcp> [firewall_9p4oqb] Starting node instance: nothing to do
2019-08-08 12:52:03.831  CFY <gcp> [firewall_9p4oqb] Poststarting node instance: nothing to do
2019-08-08 12:52:04.122  CFY <gcp> [firewall_9p4oqb] Node instance started
2019-08-08 12:52:04.916  CFY <gcp> [subnet_nhked5.create] Task rescheduled 'cloudify_gcp.compute.subnetwork.create' -> Operation started
Traceback (most recent call last):
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 813, in main
    payload = handler.handle()
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 464, in handle
    raise ctx.operation._operation_retry
OperationRetry: Operation started

2019-08-08 12:52:20.041  CFY <gcp> [subnet_nhked5.create] Sending task 'cloudify_gcp.compute.subnetwork.create' [retry 1/60]
2019-08-08 12:52:23.748  LOG <gcp> [subnet_nhked5.create] INFO: Get subnetwork subnet-nhked5 details
2019-08-08 12:52:25.736  CFY <gcp> [subnet_nhked5.create] Task succeeded 'cloudify_gcp.compute.subnetwork.create' [retry 1/60]
2019-08-08 12:52:25.983  CFY <gcp> [subnet_nhked5] Node instance created
2019-08-08 12:52:26.098  CFY <gcp> [subnet_nhked5] Configuring node instance: nothing to do
2019-08-08 12:52:26.194  CFY <gcp> [subnet_nhked5] Starting node instance: nothing to do
2019-08-08 12:52:26.281  CFY <gcp> [subnet_nhked5] Poststarting node instance: nothing to do
2019-08-08 12:52:26.550  CFY <gcp> [subnet_nhked5] Node instance started
2019-08-08 12:52:27.176  CFY <gcp> [vm-database_36dzie] Validating node instance before creation: nothing to do
2019-08-08 12:52:27.265  CFY <gcp> [vm-database_36dzie] Precreating node instance: nothing to do
2019-08-08 12:52:27.499  CFY <gcp> [vm-database_36dzie] Creating node instance
2019-08-08 12:52:27.614  CFY <gcp> [vm-database_36dzie.create] Sending task 'script_runner.tasks.run'
2019-08-08 12:52:29.771  LOG <gcp> [vm-database_36dzie.create] INFO: Downloaded scripts/gcp/key.py to /tmp/OC0OJ/key.py
2019-08-08 12:52:30.451  CFY <gcp> [vm-database_36dzie.create] Task succeeded 'script_runner.tasks.run'
2019-08-08 12:52:30.778  CFY <gcp> [vm-database_36dzie] Node instance created
2019-08-08 12:52:31.071  CFY <gcp> [vm-database_36dzie] Configuring node instance
2019-08-08 12:52:31.306  CFY <gcp> [vm-database_36dzie.configure] Sending task 'cloudify_gcp.compute.instance.create'
2019-08-08 12:52:33.296  LOG <gcp> [vm-database_36dzie.configure] INFO: The script is 
2019-08-08 12:52:33.585  LOG <gcp> [vm-database_36dzie.configure] INFO: Adding bucket to metadata
2019-08-08 12:52:33.585  LOG <gcp> [vm-database_36dzie.configure] INFO: Adding sshKeys to metadata
2019-08-08 12:52:35.737  LOG <gcp> [vm-database_36dzie.configure] ERROR: Error traceback Traceback (most recent call last):
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/utils.py", line 262, in _decorator
    return func(*args, **kwargs)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/compute/instance.py", line 422, in create
    utils.create(instance)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/utils.py", line 163, in _decorator
    return func(resource, *args, **kwargs)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/utils.py", line 170, in create
    return resource.create()
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/utils.py", line 233, in wrapper
    response = func(self, *args, **kwargs)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/gcp.py", line 34, in _decorator
    response = func(self, *args, **kwargs)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/compute/instance.py", line 117, in create
    body=self.to_dict()).execute()
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/oauth2client/util.py", line 137, in positional_wrapper
    return wrapped(*args, **kwargs)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/googleapiclient/http.py", line 832, in execute
    raise HttpError(resp, content, uri=self.uri)
HttpError: <HttpError 400 when requesting https://www.googleapis.com/compute/v1/projects/node2faas-248113/zones/us-east4-a/instances?alt=json returned "Invalid value for field 'resource.networkInterfaces[0].subnetwork': 'https://www.googleapis.com/compute/v1/projects/node2faas-248113/regions/southamerica-east1/subnetworks/subnet-nhked5'. Instance must be in the same region as the subnetwork.">
 with message <HttpError 400 when requesting https://www.googleapis.com/compute/v1/projects/node2faas-248113/zones/us-east4-a/instances?alt=json returned "Invalid value for field 'resource.networkInterfaces[0].subnetwork': 'https://www.googleapis.com/compute/v1/projects/node2faas-248113/regions/southamerica-east1/subnetworks/subnet-nhked5'. Instance must be in the same region as the subnetwork.">
2019-08-08 12:52:35.737  LOG <gcp> [vm-database_36dzie.configure] ERROR: Error Message 
2019-08-08 12:52:36.256  CFY <gcp> [vm-database_36dzie.configure] Task failed 'cloudify_gcp.compute.instance.create'
Traceback (most recent call last):
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 813, in main
    payload = handler.handle()
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 461, in handle
    result = self._run_operation_func(ctx, kwargs)
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 519, in _run_operation_func
    return self.func(*self.args, **kwargs)
  File "/opt/mgmtworker/env/plugins/default_tenant/cloudify-gcp-plugin-1.4.4/lib/python2.7/site-packages/cloudify_gcp/utils.py", line 277, in _decorator
    raise NonRecoverableError(error.message)
NonRecoverableError

2019-08-08 12:52:36.502  CFY <gcp> 'install' workflow execution failed: RuntimeError: Workflow failed: Task failed 'cloudify_gcp.compute.instance.create'
Execution of workflow install for deployment gcp failed. [error=Traceback (most recent call last):
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 664, in _remote_workflow_child_thread
    workflow_result = self._execute_workflow_function()
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/dispatch.py", line 693, in _execute_workflow_function
    result = self.func(*self.args, **self.kwargs)
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/plugins/workflows.py", line 31, in install
    node_instances=set(ctx.node_instances))
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/plugins/lifecycle.py", line 29, in install_node_instances
    processor.install()
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/plugins/lifecycle.py", line 102, in install
    graph.execute()
  File "/opt/mgmtworker/env/lib/python2.7/site-packages/cloudify/workflows/tasks_graph.py", line 237, in execute
    raise self._error
RuntimeError: Workflow failed: Task failed 'cloudify_gcp.compute.instance.create'
]
* Run 'cfy events list 86e93293-2187-4a0e-9c06-307f3ad5483c' to retrieve the execution's events/logs
